var AppNexusAdTemplate=AppNexusAdTemplate||{};AppNexusAdTemplate.AppNexInterstitial=AppNexusAdTemplate.AppNexInterstitial||{},AppNexusAdTemplate.AppNexInterstitialConf={_timer_xbtn:0,_timer_close:15,_bg_opacity:1,_bg_color:"#000000",_gadget:"",_browser:"",_orientation:"",_width_landscape:"",_height_landscape:"",_browser_width:"",_browser_height:"",_xbtn_img:"",_click_url:"",_adImages:[],_userAgent:[],_interstitial_outer_clsname:"interstitial_outer_clsname",_interstitial_xbtn_clsname:"interstitial_xbtn_clsname",_interstitial_xbtn_txt_clsname:"interstitial_xbtn_txt_clsname",_interstitial_img_clsname:"interstitial_img_clsname",_interstitial_outer_clsname_css:"font-family: Arial, Verdana, Helvetica, sans-serif; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 100; background: #FFF; overflow: hidden;",_interstitial_xbtn_clsname_css:"width: 54px; height: 54px; float: right; z-index: 11111; text-align: center; font-size: 35px; font-weight: bolder; color: #FFF; cursor: pointer;",_interstitial_xbtn_txt_clsname_css:"width: 40px; height: 40px; border: 7px #FFF solid; border-radius: 40px; margin: 5px 5px 0 0;",_interstitial_img_clsname_css:"height: 100%; background-repeat: round; background-size: 100% 100%; cursor: pointer; z-index: 111; margin: auto;"},AppNexusAdTemplate.AppNexInterstitial={conf:AppNexusAdTemplate.AppNexInterstitialConf,win:window,doc:window.document,initializeInterstitial:function(t){var e=document.createElement("div");e.className=this.conf._interstitial_outer_clsname,e.style.cssText=this.conf._interstitial_outer_clsname_css,e.style.top="-"+this.conf._browser_height+"px",e.style.backgroundColor="rgba("+this.hex2rgb(this.conf._bg_color)+", "+this.conf._bg_opacity+")";var n=document.createElement("span");n.className=this.conf._interstitial_xbtn_clsname,n.style.cssText=this.conf._interstitial_xbtn_clsname_css,n.addEventListener("click",function(){var e=arguments[0];t.closeInterstialAd(t,e)});var i=document.createElement("div");i.className=this.conf._interstitial_img_clsname,i.style.cssText=this.conf._interstitial_img_clsname_css,i.onclick=function(e){e.currentTarget.className!=t.conf._interstitial_xbtn_clsname&&(location.href=t.conf._click_url)},i.appendChild(n),e.appendChild(i),this.doc.body.appendChild(e)},initVariables:function(){this.conf._userAgent=this.getBrowserAgent(),this.getImgSize()},getScreenMode:function(){var t;"safari"==this.conf._userAgent[0]?(width=this.win.screen.width,t=this.win.screen.height):(width=this.win.innerWidth,t=this.win.innerHeight),this.conf._browser_width=width,this.conf._browser_height=t,width<t?this.conf._orientation="portrait":this.conf._orientation="landscape"},closeInterstialAd:function(t,e){var n=t.doc.querySelector("."+t.conf._interstitial_outer_clsname);n&&n.remove(),e.stopPropagation()},getImgSize:function(){var t=this,e=new Image;t.getScreenMode();var n,i;"portrait"==t.conf._orientation?(i="100%",n=4==t.conf._adImages.length?"mobile"==t.conf._userAgent[2]?t.conf._adImages[0]:t.conf._adImages[2]:t.conf._adImages[0]):4==t.conf._adImages.length?(i="100%",n="mobile"==t.conf._userAgent[2]?t.conf._adImages[1]:t.conf._adImages[3]):2==t.conf._adImages.length?(i="100%",n=t.conf._adImages[1]):(i=t.conf._width_landscape+"px",n=t.conf._adImages[0]),e.src=n,e.onload=function(){if("landscape"==t.conf._orientation&&1==t.conf._adImages.length){var a=(e.width/e.height*1).toFixed(2);i=t.conf._browser_height*a+"px"}var r=t.doc.querySelector("."+t.conf._interstitial_img_clsname);r&&(r.style.width=i,r.style.backgroundImage="url("+n+")")}},timerXbtn:function(){var t,e,n=this,i=n.conf._timer_xbtn,a=n.doc.querySelector("."+n.conf._interstitial_xbtn_clsname),r=i;i>0?n.conf.interval=setInterval(function(i){if(t=parseInt(r/60,10),e=parseInt(r%60,10),0>r){var s=n.doc.querySelector("."+n.conf._interstitial_xbtn_clsname);""==n.conf._xbtn_img?(s.innerHTML="X",s.style.cssText=s.style.cssText+n.conf._interstitial_xbtn_txt_clsname_css):(s.innerHTML="",s.style.backgroundImage="url("+n.conf._xbtn_img+")"),n.win.clearInterval(n.conf.interval)}else a.textContent=e,r--},1e3):(n.doc.querySelector("."+n.conf._interstitial_xbtn_clsname).innerHTML="",n.doc.querySelector("."+n.conf._interstitial_xbtn_clsname).style.backgroundImage="url("+n.conf._xbtn_img+")")},timerCloser:function(){var t=this;setTimeout(function(){var e=t.doc.querySelector("."+t.conf._interstitial_outer_clsname);e&&e.remove(),t.win.clearInterval(t.conf.interval)},1e3*t.conf._timer_close)},BoxAnimation:function(t){function e(){var r=Date.now(),s=(r-n)/i,o=0,c=100*s;a.style.transform="translate("+o+"px, "+c+"px)",c<t.conf._browser_height?requestAnimationFrame(e):a.style.transform="translate(0px, "+t.conf._browser_height+"px)"}var n=0,i=50,a=t.doc.querySelector("."+t.conf._interstitial_outer_clsname);this.startAnimation=function(){n=Date.now(),requestAnimationFrame(e)}},getBrowserAgent:function(){var t,e=navigator.appName,n=navigator.userAgent;if(null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)){var i=["Internet Explorer"];return i&&null!=(t=n.match(/rv:([0-9]{1,}[\.0-9]{0,})/))&&(i[2]=t[1]),i=i?[i[0],i[2]]:[e,navigator.appVersion,"-?"]}var i=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(t=n.match(/version\/([\.\d]+)/i))&&(i[2]=t[1]),i=i?[i[1].toLowerCase(),i[2]]:[e,navigator.appVersion,"-?"],this.getScreenMode(),i.push(this.whatDeviceIsThis()),console.log(i),i},whatDeviceIsThis:function(){console.log("userAgent : "+navigator.userAgent),console.log("width : "+this.win.screen.width),console.log("height : "+this.win.screen.height);var t="";return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(navigator.userAgent.match(/pad/i)&&(t="tablet"),t=navigator.userAgent.match(/phone/i)||navigator.userAgent.match(/pod/i)?"mobile":"portrait"==this.conf._orientation&&this.win.screen.width>"740"?"tablet":"landscape"==this.conf._orientation&&this.win.screen.height>"740"?"tablet":"mobile"):t="pc",t},hex2rgb:function(t){var e,n,i;return"#"==t.charAt(0)&&(t=t.substr(1)),e=t.charAt(0)+""+t.charAt(1),n=t.charAt(2)+""+t.charAt(3),i=t.charAt(4)+""+t.charAt(5),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16),e+","+n+","+i},init:function(){function t(){e.getImgSize()}var e=this;e.initVariables(),e.initializeInterstitial(e),e.win.addEventListener("resize",t);var n=new e.BoxAnimation(e);n.startAnimation(),e.timerXbtn(),e.timerCloser()}};
